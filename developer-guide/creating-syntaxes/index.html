<!doctype html><html lang=en class=no-js><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to add support for other programming languages to Lite XL."><meta name=author content="takase1121 <20792268+takase1121@users.noreply.github.com>"><link rel=canonical href=https://takase1121.github.io/lite-xl-docs/developer-guide/creating-syntaxes/><link rel=prev href=../introduction/><link rel=next href=../creating-themes/><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.44"><title>Creating Syntaxes - Lite XL</title>
<link rel=stylesheet href=../../assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../stylesheets/extra.a58208.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,t)=>(e<<5)-e+t.charCodeAt(0),0),__md_get=(e,t=localStorage,n=__md_scope)=>JSON.parse(t.getItem(n.pathname+"."+e)),__md_set=(e,t,n=localStorage,s=__md_scope)=>{try{n.setItem(s.pathname+"."+e,JSON.stringify(t))}catch{}}</script><meta property="og:type" content="website"><meta property="og:title" content="Creating Syntaxes - Lite XL"><meta property="og:description" content="Learn how to add support for other programming languages to Lite XL."><meta property="og:image" content="https://takase1121.github.io/lite-xl-docs/assets/images/social/developer-guide/creating-syntaxes.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:url" content="https://takase1121.github.io/lite-xl-docs/developer-guide/creating-syntaxes/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Creating Syntaxes - Lite XL"><meta name=twitter:description content="Learn how to add support for other programming languages to Lite XL."><meta name=twitter:image content="https://takase1121.github.io/lite-xl-docs/assets/images/social/developer-guide/creating-syntaxes.png"><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>html.glightbox-open{overflow:initial;height:100%}.gslide-title{margin-top:0;user-select:text}.gslide-desc{color:#666;user-select:text}.gslide-image img{background:#fff}.gscrollbar-fixer{padding-right:15px}.gdesc-inner{font-size:.75rem}body[data-md-color-scheme=slate] .gdesc-inner{background:var(--md-default-bg-color)}body[data-md-color-scheme=slate] .gslide-title{color:var(--md-default-fg-color)}body[data-md-color-scheme=slate] .gslide-desc{color:var(--md-default-fg-color)}</style><script src=../../assets/javascripts/glightbox.min.js></script><body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off>
<input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off>
<label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#what-syntax-token-types-are-supported class=md-skip>Skip to content</a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="Lite XL" class="md-header__button md-logo" aria-label="Lite XL" data-md-component=logo><img src=../../assets/icon.svg alt=logo>
</a><label class="md-header__button md-icon" for=__drawer><svg viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis>Lite XL</span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis>Creating Syntaxes</span></div></div></div><form class=md-header__option data-md-component=palette><input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0>
<label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg viewBox="0 0 24 24"><path d="M12 8a4 4 0 00-4 4 4 4 0 004 4 4 4 0 004-4 4 4 0 00-4-4m0 10a6 6 0 01-6-6 6 6 0 016-6 6 6 0 016 6 6 6 0 01-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
</label><input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1>
<label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg viewBox="0 0 24 24"><path d="M12 18c-.89.0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 016 6 6 6 0 01-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>if(palette=__md_get("__palette"),palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var palette,key,value,media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52.0 019.5 16 6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required>
<label class="md-search__icon md-icon" for=__search><svg viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52.0 019.5 16 6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav class=md-search__options aria-label=Search><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/takase1121/lite-xl-docs title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87.0 00-40.81.0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34.0 01-48.55.0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86.0 000 40.81l195.61 195.6a28.86 28.86.0 0040.8.0l194.69-194.69a28.86 28.86.0 000-40.81"/></svg></div><div class=md-source__repository>GitHub</div></a></div></nav></header><div class=md-container data-md-component=container><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link>Home</a><li class=md-tabs__item><a href=../../setup/getting-started/ class=md-tabs__link>Set Up</a><li class=md-tabs__item><a href=../../user-guide/introduction/ class=md-tabs__link>User Guide</a><li class="md-tabs__item md-tabs__item--active"><a href=../introduction/ class=md-tabs__link>Developer Guide</a><li class=md-tabs__item><a href=../../about/contributors/ class=md-tabs__link>About</a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="Lite XL" class="md-nav__button md-logo" aria-label="Lite XL" data-md-component=logo><img src=../../assets/icon.svg alt=logo>
</a>Lite XL</label><div class=md-nav__source><a href=https://github.com/takase1121/lite-xl-docs title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87.0 00-40.81.0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34.0 01-48.55.0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86.0 000 40.81l195.61 195.6a28.86 28.86.0 0040.8.0l194.69-194.69a28.86 28.86.0 000-40.81"/></svg></div><div class=md-source__repository>GitHub</div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis>Home</span></a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_2>
<label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0><span class=md-ellipsis>Set Up
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false><label class=md-nav__title for=__nav_2><span class="md-nav__icon md-icon"></span>
Set Up</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../setup/getting-started/ class=md-nav__link><span class=md-ellipsis>Getting Started</span></a><li class=md-nav__item><a href=../../setup/install-from-package-managers/ class=md-nav__link><span class=md-ellipsis>Install from Package Managers</span></a><li class=md-nav__item><a href=../../setup/building-from-source/ class=md-nav__link><span class=md-ellipsis>Building from Source</span></a><li class=md-nav__item><a href=../../setup/platform-notes/ class=md-nav__link><span class=md-ellipsis>Platform-Specific Notes</span></a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_3>
<label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0><span class=md-ellipsis>User Guide
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false><label class=md-nav__title for=__nav_3><span class="md-nav__icon md-icon"></span>
User Guide</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../user-guide/introduction/ class=md-nav__link><span class=md-ellipsis>Introduction</span></a><li class=md-nav__item><a href=../../user-guide/configuration/ class=md-nav__link><span class=md-ellipsis>Configuration</span></a><li class=md-nav__item><a href=../../user-guide/managing-plugins/ class=md-nav__link><span class=md-ellipsis>Managing Plugins</span></a><li class=md-nav__item><a href=../../user-guide/ide-setup/ class=md-nav__link><span class=md-ellipsis>IDE Setup</span></a><li class=md-nav__item><a href=../../user-guide/lsp/ class=md-nav__link><span class=md-ellipsis>Language Server support</span></a><li class=md-nav__item><a href=../../user-guide/keymap/ class=md-nav__link><span class=md-ellipsis>Keymap</span></a><li class=md-nav__item><a href=../../user-guide/macos-keymap/ class=md-nav__link><span class=md-ellipsis>macOS Keymap</span></a></ul></nav><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_4 checked>
<label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex><span class=md-ellipsis>Developer Guide
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true><label class=md-nav__title for=__nav_4><span class="md-nav__icon md-icon"></span>
Developer Guide</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../introduction/ class=md-nav__link><span class=md-ellipsis>Introduction</span></a><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_4_2 checked>
<label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0><span class=md-ellipsis>Syntaxes and Themes
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true><label class=md-nav__title for=__nav_4_2><span class="md-nav__icon md-icon"></span>
Syntaxes and Themes</label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc>
<label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis>Creating Syntaxes
</span><span class="md-nav__icon md-icon"></span>
</label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis>Creating Syntaxes</span></a><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span>
Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#what-syntax-token-types-are-supported class=md-nav__link><span class=md-ellipsis>What syntax token types are supported?</span></a><li class=md-nav__item><a href=#example-syntax-ssh-config-files class=md-nav__link><span class=md-ellipsis>Example syntax: ssh config files</span></a><nav class=md-nav aria-label="Example syntax: ssh config files"><ul class=md-nav__list><li class=md-nav__item><a href=#header class=md-nav__link><span class=md-ellipsis>Header</span></a><li class=md-nav__item><a href=#files class=md-nav__link><span class=md-ellipsis>Files</span></a><li class=md-nav__item><a href=#comment class=md-nav__link><span class=md-ellipsis>Comment</span></a><li class=md-nav__item><a href=#patterns class=md-nav__link><span class=md-ellipsis>Patterns</span></a><nav class=md-nav aria-label=Patterns><ul class=md-nav__list><li class=md-nav__item><a href=#simple-pattern class=md-nav__link><span class=md-ellipsis>Simple Pattern</span></a><li class=md-nav__item><a href=#start-end-pattern class=md-nav__link><span class=md-ellipsis>Start & End Pattern</span></a><li class=md-nav__item><a href=#start-end-pattern-with-escape class=md-nav__link><span class=md-ellipsis>Start & End Pattern with Escape</span></a></ul></nav><li class=md-nav__item><a href=#symbols class=md-nav__link><span class=md-ellipsis>Symbols</span></a><nav class=md-nav aria-label=Symbols><ul class=md-nav__list><li class=md-nav__item><a href=#tip-double-check-your-patterns class=md-nav__link><span class=md-ellipsis>Tip: double-check your patterns!</span></a><nav class=md-nav aria-label="Tip: double-check your patterns!"><ul class=md-nav__list><li class=md-nav__item><a href=#case-1-spaces-between-two-symbols-tokens class=md-nav__link><span class=md-ellipsis>Case 1: Spaces between two symbols tokens</span></a><li class=md-nav__item><a href=#case-2-patterns-symbols-tokens class=md-nav__link><span class=md-ellipsis>Case 2: Patterns & symbols tokens</span></a></ul></nav></ul></nav></ul></nav><li class=md-nav__item><a href=#testing-your-new-syntax class=md-nav__link><span class=md-ellipsis>Testing Your New Syntax</span></a><li class=md-nav__item><a href=#example-advanced-syntax-markdown class=md-nav__link><span class=md-ellipsis>Example advanced syntax: Markdown</span></a><nav class=md-nav aria-label="Example advanced syntax: Markdown"><ul class=md-nav__list><li class=md-nav__item><a href=#syntax-fonts-since-11610 class=md-nav__link><span class=md-ellipsis>Syntax fonts (Since 1.16.10)</span></a><li class=md-nav__item><a href=#space-handling-since-v210 class=md-nav__link><span class=md-ellipsis>Space handling (since v2.1.0)</span></a><li class=md-nav__item><a href=#simple-patterns-with-multiple-tokens-v11610 class=md-nav__link><span class=md-ellipsis>Simple patterns with multiple tokens (v1.16.10)</span></a><li class=md-nav__item><a href=#subsyntaxes-since-v11610 class=md-nav__link><span class=md-ellipsis>Subsyntaxes (Since v1.16.10)</span></a></ul></nav></ul></nav><li class=md-nav__item><a href=../creating-themes/ class=md-nav__link><span class=md-ellipsis>Creating Themes</span></a></ul></nav><li class=md-nav__item><a href=../commands/ class=md-nav__link><span class=md-ellipsis>Commands</span></a><li class=md-nav__item><a href=../managing-keyboard-shortcuts/ class=md-nav__link><span class=md-ellipsis>Managing Keyboard Shortcuts</span></a><li class=md-nav__item><a href=../classes-and-objects/ class=md-nav__link><span class=md-ellipsis>Classes and Objects</span></a><li class=md-nav__item><a href=../documents/ class=md-nav__link><span class=md-ellipsis>Documents</span></a><li class=md-nav__item><a href=../views/ class=md-nav__link><span class=md-ellipsis>Views</span></a><li class=md-nav__item><a href=../background-tasks/ class=md-nav__link><span class=md-ellipsis>Background Tasks</span></a><li class=md-nav__item><a href=../debugging/ class=md-nav__link><span class=md-ellipsis>Debugging</span></a><li class=md-nav__item><a href=../using-regular-expressions/ class=md-nav__link><span class=md-ellipsis>Using Regular Expressions</span></a><li class=md-nav__item><a href=../interacting-with-the-os/ class=md-nav__link><span class=md-ellipsis>Interacting with the OS</span></a><li class=md-nav__item><a href=../child-processes/ class=md-nav__link><span class=md-ellipsis>Child Processes</span></a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_4_13>
<label class=md-nav__link for=__nav_4_13 id=__nav_4_13_label tabindex=0><span class=md-ellipsis>Samples
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_13_label aria-expanded=false><label class=md-nav__title for=__nav_4_13><span class="md-nav__icon md-icon"></span>
Samples</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../simple-plugin/ class=md-nav__link><span class=md-ellipsis>Simple Plugin</span></a><li class=md-nav__item><a href=../views-toolbarview/ class=md-nav__link><span class=md-ellipsis>ToolbarView</span></a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_4_14>
<label class=md-nav__link for=__nav_4_14 id=__nav_4_14_label tabindex=0><span class=md-ellipsis>Advanced Topics
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_14_label aria-expanded=false><label class=md-nav__title for=__nav_4_14><span class="md-nav__icon md-icon"></span>
Advanced Topics</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../renderer-internals/ class=md-nav__link><span class=md-ellipsis>How Renderer Works</span></a></ul></nav></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_5>
<label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0><span class=md-ellipsis>About
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false><label class=md-nav__title for=__nav_5><span class="md-nav__icon md-icon"></span>
About</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../about/contributors/ class=md-nav__link><span class=md-ellipsis>Contributors</span></a><li class=md-nav__item><a href=../../about/faq/ class=md-nav__link><span class=md-ellipsis>FAQ</span></a></ul></nav></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span>
Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#what-syntax-token-types-are-supported class=md-nav__link><span class=md-ellipsis>What syntax token types are supported?</span></a><li class=md-nav__item><a href=#example-syntax-ssh-config-files class=md-nav__link><span class=md-ellipsis>Example syntax: ssh config files</span></a><nav class=md-nav aria-label="Example syntax: ssh config files"><ul class=md-nav__list><li class=md-nav__item><a href=#header class=md-nav__link><span class=md-ellipsis>Header</span></a><li class=md-nav__item><a href=#files class=md-nav__link><span class=md-ellipsis>Files</span></a><li class=md-nav__item><a href=#comment class=md-nav__link><span class=md-ellipsis>Comment</span></a><li class=md-nav__item><a href=#patterns class=md-nav__link><span class=md-ellipsis>Patterns</span></a><nav class=md-nav aria-label=Patterns><ul class=md-nav__list><li class=md-nav__item><a href=#simple-pattern class=md-nav__link><span class=md-ellipsis>Simple Pattern</span></a><li class=md-nav__item><a href=#start-end-pattern class=md-nav__link><span class=md-ellipsis>Start & End Pattern</span></a><li class=md-nav__item><a href=#start-end-pattern-with-escape class=md-nav__link><span class=md-ellipsis>Start & End Pattern with Escape</span></a></ul></nav><li class=md-nav__item><a href=#symbols class=md-nav__link><span class=md-ellipsis>Symbols</span></a><nav class=md-nav aria-label=Symbols><ul class=md-nav__list><li class=md-nav__item><a href=#tip-double-check-your-patterns class=md-nav__link><span class=md-ellipsis>Tip: double-check your patterns!</span></a><nav class=md-nav aria-label="Tip: double-check your patterns!"><ul class=md-nav__list><li class=md-nav__item><a href=#case-1-spaces-between-two-symbols-tokens class=md-nav__link><span class=md-ellipsis>Case 1: Spaces between two symbols tokens</span></a><li class=md-nav__item><a href=#case-2-patterns-symbols-tokens class=md-nav__link><span class=md-ellipsis>Case 2: Patterns & symbols tokens</span></a></ul></nav></ul></nav></ul></nav><li class=md-nav__item><a href=#testing-your-new-syntax class=md-nav__link><span class=md-ellipsis>Testing Your New Syntax</span></a><li class=md-nav__item><a href=#example-advanced-syntax-markdown class=md-nav__link><span class=md-ellipsis>Example advanced syntax: Markdown</span></a><nav class=md-nav aria-label="Example advanced syntax: Markdown"><ul class=md-nav__list><li class=md-nav__item><a href=#syntax-fonts-since-11610 class=md-nav__link><span class=md-ellipsis>Syntax fonts (Since 1.16.10)</span></a><li class=md-nav__item><a href=#space-handling-since-v210 class=md-nav__link><span class=md-ellipsis>Space handling (since v2.1.0)</span></a><li class=md-nav__item><a href=#simple-patterns-with-multiple-tokens-v11610 class=md-nav__link><span class=md-ellipsis>Simple patterns with multiple tokens (v1.16.10)</span></a><li class=md-nav__item><a href=#subsyntaxes-since-v11610 class=md-nav__link><span class=md-ellipsis>Subsyntaxes (Since v1.16.10)</span></a></ul></nav></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/takase1121/lite-xl-docs/edit/master/docs/developer-guide/creating-syntaxes.md title="Edit this page" class="md-content__button md-icon"><svg viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1.0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1.0.3.1.4.2l1.3 1.3c.2.2.2.6.0.8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
</a><a href=https://github.com/takase1121/lite-xl-docs/raw/master/docs/developer-guide/creating-syntaxes.md title="View source of this page" class="md-content__button md-icon"><svg viewBox="0 0 24 24"><path d="M17 18c.56.0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73.0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5A2.5 2.5.0 0114.5 19a2.5 2.5.0 012.5-2.5 2.5 2.5.0 012.5 2.5A2.5 2.5.0 0117 21.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6A2 2 0 004 4v16a2 2 0 002 2h4.5a8.2 8.2.0 01-1.23-2"/></svg></a><h1>Creating Syntaxes</h1><p>Syntax highlighting plugins for Lite XL are Lua files.
These define some patterns or regular expressions that match different parts of a given language,
assigning token types to each match.
These different token types are then given different colors by your chosen color scheme.<h2 id=what-syntax-token-types-are-supported>What syntax token types are supported?</h2><p>The supported syntax token types, defined by <code>lite-xl/core/style.lua</code>, are:<ul><li><code>normal</code><li><code>symbol</code><li><code>comment</code><li><code>keyword</code><li><code>keyword2</code><li><code>number</code><li><code>literal</code><li><code>string</code><li><code>operator</code><li><code>function</code></ul><p>In your syntax highlighting plugin, you write patterns to match parts of the language syntax,
assigning these token types to matches.
You don't have to use them all — just use as many as you need for your language.<p>Let's walk through an example syntax definition and see how this works.<h2 id=example-syntax-ssh-config-files>Example syntax: ssh config files</h2><p>This is a small, simple example of a syntax definition.
It's intended to highlight SSH Config files and looks like this:<div class=highlight><pre><span></span><code><a id=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1>-- mod-version:2 -- lite-xl 2.0</span>
<a id=__codelineno-0-2 href=#__codelineno-0-2></a><span class=kd>local</span> <span class=n>syntax</span> <span class=o>=</span> <span class=nb>require</span> <span class=s2>&quot;core.syntax&quot;</span>
<a id=__codelineno-0-3 href=#__codelineno-0-3></a>
<a id=__codelineno-0-4 href=#__codelineno-0-4></a><span class=n>syntax</span><span class=p>.</span><span class=n>add</span> <span class=p>{</span>
<a id=__codelineno-0-5 href=#__codelineno-0-5></a>  <span class=n>files</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;sshd?/?_?config$&quot;</span> <span class=p>},</span>
<a id=__codelineno-0-6 href=#__codelineno-0-6></a>  <span class=n>comment</span> <span class=o>=</span> <span class=s1>&#39;#&#39;</span><span class=p>,</span>
<a id=__codelineno-0-7 href=#__codelineno-0-7></a>  <span class=n>patterns</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;#.*</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>        <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;comment&quot;</span>  <span class=p>},</span>
<a id=__codelineno-0-9 href=#__codelineno-0-9></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%d+&quot;</span><span class=p>,</span>          <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;number&quot;</span>   <span class=p>},</span>
<a id=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[%a_][%w_]*&quot;</span><span class=p>,</span>  <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;symbol&quot;</span>   <span class=p>},</span>
<a id=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;@&quot;</span><span class=p>,</span>            <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;operator&quot;</span> <span class=p>},</span>
<a id=__codelineno-0-12 href=#__codelineno-0-12></a>  <span class=p>},</span>
<a id=__codelineno-0-13 href=#__codelineno-0-13></a>  <span class=n>symbols</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=c1>-- ssh config</span>
<a id=__codelineno-0-15 href=#__codelineno-0-15></a>    <span class=p>[</span><span class=s2>&quot;Host&quot;</span><span class=p>]</span>                         <span class=o>=</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span>
<a id=__codelineno-0-16 href=#__codelineno-0-16></a>    <span class=p>[</span><span class=s2>&quot;ProxyCommand&quot;</span><span class=p>]</span>                 <span class=o>=</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span>
<a id=__codelineno-0-17 href=#__codelineno-0-17></a>
<a id=__codelineno-0-18 href=#__codelineno-0-18></a>    <span class=p>[</span><span class=s2>&quot;HostName&quot;</span><span class=p>]</span>                     <span class=o>=</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span>
<a id=__codelineno-0-19 href=#__codelineno-0-19></a>    <span class=p>[</span><span class=s2>&quot;IdentityFile&quot;</span><span class=p>]</span>                 <span class=o>=</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span>
<a id=__codelineno-0-20 href=#__codelineno-0-20></a>    <span class=p>...</span>
<a id=__codelineno-0-21 href=#__codelineno-0-21></a>
<a id=__codelineno-0-22 href=#__codelineno-0-22></a>    <span class=c1>-- sshd config</span>
<a id=__codelineno-0-23 href=#__codelineno-0-23></a>    <span class=p>[</span><span class=s2>&quot;Subsystem&quot;</span><span class=p>]</span>                    <span class=o>=</span> <span class=s2>&quot;keyword2&quot;</span><span class=p>,</span>
<a id=__codelineno-0-24 href=#__codelineno-0-24></a>
<a id=__codelineno-0-25 href=#__codelineno-0-25></a>    <span class=c1>-- Literals</span>
<a id=__codelineno-0-26 href=#__codelineno-0-26></a>    <span class=p>[</span><span class=s2>&quot;yes&quot;</span><span class=p>]</span>      <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-0-27 href=#__codelineno-0-27></a>    <span class=p>[</span><span class=s2>&quot;no&quot;</span><span class=p>]</span>       <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-0-28 href=#__codelineno-0-28></a>    <span class=p>[</span><span class=s2>&quot;any&quot;</span><span class=p>]</span>      <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-0-29 href=#__codelineno-0-29></a>    <span class=p>[</span><span class=s2>&quot;ask&quot;</span><span class=p>]</span>      <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-0-30 href=#__codelineno-0-30></a>  <span class=p>},</span>
<a id=__codelineno-0-31 href=#__codelineno-0-31></a><span class=p>}</span>
</code></pre></div><p>Let's take each section in turn and see how it works.<h3 id=header>Header</h3><p>The first line is a Lua comment and tells Lite XL which version this plugin requires.
The second imports the <code>core.syntax</code> module to allow us to declare a new syntax:<div class=highlight><pre><span></span><code><a id=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>-- mod-version:2 -- lite-xl 2.0</span>
<a id=__codelineno-1-2 href=#__codelineno-1-2></a><span class=kd>local</span> <span class=n>syntax</span> <span class=o>=</span> <span class=nb>require</span> <span class=s2>&quot;core.syntax&quot;</span>
</code></pre></div><p>We then add a syntax definition to Lite XL with <code>syntax.add {...}</code>.
The contents of this definition are covered next.<h3 id=files>Files</h3><p>The <code>files</code> property tells Lite XL which files this syntax should be used for.
This is a Lua pattern that matches against the full path of the current file.
For example, to match against Markdown files (<code>.md</code> or a <code>.markdown</code> files), you could do this:<div class=highlight><pre><span></span><code><a id=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>files</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%.md$&quot;</span><span class=p>,</span> <span class=s2>&quot;%.markdown$&quot;</span> <span class=p>},</span>
</code></pre></div><p>In our original example, we match against the end of the path rather than the extension,
because SSH config files don't have extensions, and we don't want to match all <code>config</code> files.
We expect the path for SSH config files to look something like one of these:<ul><li><code>~/.ssh/config</code><li><code>/etc/ssh/ssh_config</code><li><code>/etc/ssh/sshd_config</code></ul><p>This pattern matches paths that look like that:<div class=highlight><pre><span></span><code><a id=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>files</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;sshd?/?_?config$&quot;</span> <span class=p>},</span>
</code></pre></div><h3 id=comment>Comment</h3><p>The <code>comment</code> property is used to tell Lite XL what to insert in order to create a comment.
It is not a part of syntax definition.
You can also use <code>block_comment</code> to tell Lite XL how to create multiline / block comments.<h3 id=patterns>Patterns</h3><p>A given piece of text can only match one pattern.
Once Lite XL decides that a piece of text matches a pattern, it will assign that token type to it and move on.
Patterns are tested in the order that they are written in the syntax definition, so the first match will win.<p>Patterns are based on Lua patterns or PCRE2.<p>You may find detailed information on Lua patterns in the <a href=https://www.lua.org/manual/5.4/manual.html>Lua Reference Manual</a>.
For PCRE, there are various [regex tester websites] that provide documentation.<p>Lua patterns can be used by specifying <code>pattern</code> when defining a pattern,
while PCRE can be used by specifying <code>regex</code> when defining a pattern.<p>Each pattern takes one of the following forms:<h4 id=simple-pattern>Simple Pattern</h4><div class=highlight><pre><span></span><code><a id=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;#.*</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>        <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;comment&quot;</span> <span class=p>},</span>
</code></pre></div><p>When <code>pattern</code> is a string, Lite XL will test the input against the pattern.
If the input matches, Lite XL will assign the given token type to the input.<p>In this case, any line starting with <code>#</code> will be assigned the type <code>comment</code>.<h4 id=start-end-pattern>Start & End Pattern</h4><div class=highlight><pre><span></span><code><a id=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%[&quot;</span><span class=p>,</span> <span class=s2>&quot;%]&quot;</span> <span class=p>},</span> <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;keyword&quot;</span> <span class=p>},</span>
</code></pre></div><p>When <code>pattern</code> is a table with 2 elements, Lite XL will use them to test for the start and the end of a range.
Everything between the start and the end will be assigned the given token type.<p>In this case, everything between <code>[</code> and <code>]</code> will be assigned the type <code>keyword</code>.<p>However, it does not account for escape sequences.
Inputs such as <code>[\]]</code> will be interpreted wrongly as <code>[\]</code> and <code>]</code>.<h4 id=start-end-pattern-with-escape>Start & End Pattern with Escape</h4><div class=highlight><pre><span></span><code><a id=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s1>&#39;&quot;&#39;</span><span class=p>,</span> <span class=s1>&#39;&quot;&#39;</span><span class=p>,</span> <span class=s1>&#39;</span><span class=se>\\</span><span class=s1>&#39;</span> <span class=p>},</span> <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span> <span class=p>},</span>
</code></pre></div><p>When <code>pattern</code> is a table with 3 elements, Lite XL will use the first two to test for the start
and the end of a range.
The last element is used to denote an "escape sequence".
If the text matches the 3<sup>rd</sup> element followed by the 2<sup>nd</sup> element, it will not be interpreted
as the end of a range.<p>In this case, everything between <code>"</code> and <code>"</code> will be assigned the type <code>string</code>.
A <code>string</code> can have escape sequences prefixed with <code>\</code>.<p>Given the input <code>"\"Hello John\""</code>, the entire input will be assigned the type <code>string</code>.<h3 id=symbols>Symbols</h3><p>The <code>symbols</code> section allows you to assign token types to particular keywords or strings —
usually reserved words in the language you are highlighting.
The token type in this section <strong>always take precedence</strong> over token types declared in patterns.<div class="admonition note"><p class=admonition-title>Note<p>This is <strong>not related to the <code>symbol</code> token type</strong>.</div><p>For example this highlights <code>Host</code> using the <code>function</code> token type, <code>HostName</code> as a <code>keyword</code>, <code>yes</code>, <code>no</code>,
<code>any</code> and <code>ask</code> as a <code>literal</code>:<div class=highlight><pre><span></span><code><a id=__codelineno-7-1 href=#__codelineno-7-1></a><span class=p>[</span><span class=s2>&quot;Host&quot;</span><span class=p>]</span>                         <span class=o>=</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span>
<a id=__codelineno-7-2 href=#__codelineno-7-2></a><span class=p>[</span><span class=s2>&quot;HostName&quot;</span><span class=p>]</span>                     <span class=o>=</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span>
<a id=__codelineno-7-3 href=#__codelineno-7-3></a>
<a id=__codelineno-7-4 href=#__codelineno-7-4></a><span class=p>[</span><span class=s2>&quot;yes&quot;</span><span class=p>]</span>      <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-7-5 href=#__codelineno-7-5></a><span class=p>[</span><span class=s2>&quot;no&quot;</span><span class=p>]</span>       <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-7-6 href=#__codelineno-7-6></a><span class=p>[</span><span class=s2>&quot;any&quot;</span><span class=p>]</span>      <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
<a id=__codelineno-7-7 href=#__codelineno-7-7></a><span class=p>[</span><span class=s2>&quot;ask&quot;</span><span class=p>]</span>      <span class=o>=</span> <span class=s2>&quot;literal&quot;</span><span class=p>,</span>
</code></pre></div><h4 id=tip-double-check-your-patterns>Tip: double-check your patterns!</h4><p>There are a few common mistakes that can be made when using the <code>symbols</code> table in conjunction with patterns.<h5 id=case-1-spaces-between-two-symbols-tokens>Case 1: Spaces between two <code>symbols</code> tokens</h5><p>Let's have an example:<div class=highlight><pre><span></span><code><a id=__codelineno-8-1 href=#__codelineno-8-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[%a_][%w_]+%s+()[%a_][%w_]+&quot;</span><span class=p>,</span> <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;keyword2&quot;</span><span class=p>,</span> <span class=s2>&quot;symbol&quot;</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div><p>Let's explain the pattern a bit (omitting the empty parentheses):<div class=highlight><pre><span></span><code><a id=__codelineno-9-1 href=#__codelineno-9-1></a>[%a_] = any alphabet and underscore
<a id=__codelineno-9-2 href=#__codelineno-9-2></a>[%w_] = any alphabet, number and underscore
<a id=__codelineno-9-3 href=#__codelineno-9-3></a>%s = any whitespace character
<a id=__codelineno-9-4 href=#__codelineno-9-4></a>
<a id=__codelineno-9-5 href=#__codelineno-9-5></a>WORD =
<a id=__codelineno-9-6 href=#__codelineno-9-6></a>  [%a_] followed by (1 or more [%w_])
<a id=__codelineno-9-7 href=#__codelineno-9-7></a>
<a id=__codelineno-9-8 href=#__codelineno-9-8></a>pattern =
<a id=__codelineno-9-9 href=#__codelineno-9-9></a>  WORD followed by (one or more %s) followed by WORD
</code></pre></div><p>Afterwards, you add an entry <code>["my"] = "literal"</code> in the <code>symbols</code> table.
You test the syntax with <code>my function</code> and found that <code>"my"</code> isn't highlighted as <code>literal</code>.
Why did that happen?<p><strong><code>symbols</code> table requires an exact match</strong>.
If you look carefully, the empty parentheses (<code>()</code>) is placed <strong>after the space</strong>!
This tells Lite XL that <code>WORD followed by (one or more %s)</code> is a token, which will match <code>my</code>
(note the space in the match).<p>The fix is to add a <code>normal</code> token for the whitespace between the two tokens:<div class=highlight><pre><span></span><code><a id=__codelineno-10-1 href=#__codelineno-10-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[%a_][%w_]+()%s+()[%a_][%w_]+&quot;</span><span class=p>,</span> <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;keyword2&quot;</span><span class=p>,</span> <span class=s2>&quot;normal&quot;</span><span class=p>,</span> <span class=s2>&quot;symbol&quot;</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div><h5 id=case-2-patterns-symbols-tokens>Case 2: Patterns & <code>symbols</code> tokens</h5><p>One might assume that Lite XL magically matches text against the <code>symbols</code> table.
This is not the case.<p>In some languages, people may add a generic pattern to delegate the matching to the <code>symbols</code> table.<div class=highlight><pre><span></span><code><a id=__codelineno-11-1 href=#__codelineno-11-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[%a_][%w_]*&quot;</span><span class=p>,</span> <span class=s2>&quot;symbol&quot;</span> <span class=p>}</span>
</code></pre></div><p>However, the <code>symbols</code> table may look like this:<div class=highlight><pre><span></span><code><a id=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>symbols</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-12-2 href=#__codelineno-12-2></a>  <span class=p>[</span><span class=s2>&quot;my-symbol&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span>
<a id=__codelineno-12-3 href=#__codelineno-12-3></a>  <span class=p>[</span><span class=s2>&quot;..something_else&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;literal&quot;</span>
<a id=__codelineno-12-4 href=#__codelineno-12-4></a><span class=p>}</span>
</code></pre></div><p><code>"my-symbol</code> contains a dash (<code>-</code>) and <code>"..something_else"</code> contains 2 dots (<code>.</code>).
None of the characters are matched by <code>[%a_][%w_]*</code>!<p><strong>Beware of the text you intend to match in the <code>symbols</code> table.</strong>
<strong>If you want to use it, you need to ensure that it matches one of the patterns.</strong><p>The correct patterns are:<div class=highlight><pre><span></span><code><a id=__codelineno-13-1 href=#__codelineno-13-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[%a_][%w%-_]*&quot;</span><span class=p>,</span> <span class=s2>&quot;symbol&quot;</span> <span class=p>},</span>
<a id=__codelineno-13-2 href=#__codelineno-13-2></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%.%.[%a_][%w_]*&quot;</span><span class=p>,</span> <span class=s2>&quot;symbol&quot;</span> <span class=p>},</span>
</code></pre></div><h2 id=testing-your-new-syntax>Testing Your New Syntax</h2><p>To test your new syntax highlighting you need to do two things:<ul><li>Reload the Lite XL core<li>Load a file in your chosen language and see how it looks</ul><p>To reload the core, you can either restart Lite XL or reload it.
To do this, type <code>ctrl+shit+p</code> to open the command palette, then select <code>Core: Restart</code>
(or type <code>crr</code> or something similar to match it), then press Enter.
You will need to restart the core after any changes you make to the syntax highlighting definition.<h2 id=example-advanced-syntax-markdown>Example advanced syntax: Markdown</h2><div class="admonition note"><p class=admonition-title>Note<p>This example has features from 2.1.
It is not compatible with older versions of Lite XL.</div><p>Not all languages are as simple as SSH config files.
Markup languages like HTML and Markdown are especially hard to parse correctly.
Here's the Markdown syntax file in its full glory:<div class=highlight><pre><span></span><code><a id=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1>-- mod-version:3</span>
<a id=__codelineno-14-2 href=#__codelineno-14-2></a><span class=kd>local</span> <span class=n>syntax</span> <span class=o>=</span> <span class=nb>require</span> <span class=s2>&quot;core.syntax&quot;</span>
<a id=__codelineno-14-3 href=#__codelineno-14-3></a><span class=kd>local</span> <span class=n>style</span> <span class=o>=</span> <span class=nb>require</span> <span class=s2>&quot;core.style&quot;</span>
<a id=__codelineno-14-4 href=#__codelineno-14-4></a><span class=kd>local</span> <span class=n>core</span> <span class=o>=</span> <span class=nb>require</span> <span class=s2>&quot;core&quot;</span>
<a id=__codelineno-14-5 href=#__codelineno-14-5></a>
<a id=__codelineno-14-6 href=#__codelineno-14-6></a><span class=kd>local</span> <span class=n>initial_color</span> <span class=o>=</span> <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;keyword2&quot;</span><span class=p>]</span>
<a id=__codelineno-14-7 href=#__codelineno-14-7></a>
<a id=__codelineno-14-8 href=#__codelineno-14-8></a><span class=c1>-- Add 3 type of font styles for use on markdown files</span>
<a id=__codelineno-14-9 href=#__codelineno-14-9></a><span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>attr</span> <span class=kr>in</span> <span class=nb>pairs</span><span class=p>({</span><span class=s2>&quot;bold&quot;</span><span class=p>,</span> <span class=s2>&quot;italic&quot;</span><span class=p>,</span> <span class=s2>&quot;bold_italic&quot;</span><span class=p>})</span> <span class=kr>do</span>
<a id=__codelineno-14-10 href=#__codelineno-14-10></a>  <span class=kd>local</span> <span class=n>attributes</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-14-11 href=#__codelineno-14-11></a>  <span class=kr>if</span> <span class=n>attr</span> <span class=o>~=</span> <span class=s2>&quot;bold_italic&quot;</span> <span class=kr>then</span>
<a id=__codelineno-14-12 href=#__codelineno-14-12></a>    <span class=n>attributes</span><span class=p>[</span><span class=n>attr</span><span class=p>]</span> <span class=o>=</span> <span class=kc>true</span>
<a id=__codelineno-14-13 href=#__codelineno-14-13></a>  <span class=kr>else</span>
<a id=__codelineno-14-14 href=#__codelineno-14-14></a>    <span class=n>attributes</span><span class=p>[</span><span class=s2>&quot;bold&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>true</span>
<a id=__codelineno-14-15 href=#__codelineno-14-15></a>    <span class=n>attributes</span><span class=p>[</span><span class=s2>&quot;italic&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>true</span>
<a id=__codelineno-14-16 href=#__codelineno-14-16></a>  <span class=kr>end</span>
<a id=__codelineno-14-17 href=#__codelineno-14-17></a>  <span class=c1>-- no way to copy user custom font with additional attributes :(</span>
<a id=__codelineno-14-18 href=#__codelineno-14-18></a>  <span class=n>style</span><span class=p>.</span><span class=n>syntax_fonts</span><span class=p>[</span><span class=s2>&quot;markdown_&quot;</span><span class=o>..</span><span class=n>attr</span><span class=p>]</span> <span class=o>=</span> <span class=n>renderer</span><span class=p>.</span><span class=n>font</span><span class=p>.</span><span class=nb>load</span><span class=p>(</span>
<a id=__codelineno-14-19 href=#__codelineno-14-19></a>    <span class=n>DATADIR</span> <span class=o>..</span> <span class=s2>&quot;/fonts/JetBrainsMono-Regular.ttf&quot;</span><span class=p>,</span>
<a id=__codelineno-14-20 href=#__codelineno-14-20></a>    <span class=n>style</span><span class=p>.</span><span class=n>code_font</span><span class=p>:</span><span class=n>get_size</span><span class=p>(),</span>
<a id=__codelineno-14-21 href=#__codelineno-14-21></a>    <span class=n>attributes</span>
<a id=__codelineno-14-22 href=#__codelineno-14-22></a>  <span class=p>)</span>
<a id=__codelineno-14-23 href=#__codelineno-14-23></a>  <span class=c1>-- also add a color for it</span>
<a id=__codelineno-14-24 href=#__codelineno-14-24></a>  <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;markdown_&quot;</span><span class=o>..</span><span class=n>attr</span><span class=p>]</span> <span class=o>=</span> <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;keyword2&quot;</span><span class=p>]</span>
<a id=__codelineno-14-25 href=#__codelineno-14-25></a><span class=kr>end</span>
<a id=__codelineno-14-26 href=#__codelineno-14-26></a>
<a id=__codelineno-14-27 href=#__codelineno-14-27></a><span class=kd>local</span> <span class=n>in_squares_match</span> <span class=o>=</span> <span class=s2>&quot;^%[%]&quot;</span>
<a id=__codelineno-14-28 href=#__codelineno-14-28></a><span class=kd>local</span> <span class=n>in_parenthesis_match</span> <span class=o>=</span> <span class=s2>&quot;^%(%)&quot;</span>
<a id=__codelineno-14-29 href=#__codelineno-14-29></a>
<a id=__codelineno-14-30 href=#__codelineno-14-30></a><span class=n>syntax</span><span class=p>.</span><span class=n>add</span> <span class=p>{</span>
<a id=__codelineno-14-31 href=#__codelineno-14-31></a>  <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;Markdown&quot;</span><span class=p>,</span>
<a id=__codelineno-14-32 href=#__codelineno-14-32></a>  <span class=n>files</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%.md$&quot;</span><span class=p>,</span> <span class=s2>&quot;%.markdown$&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-33 href=#__codelineno-14-33></a>  <span class=n>block_comment</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;&lt;!--&quot;</span><span class=p>,</span> <span class=s2>&quot;--&gt;&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-34 href=#__codelineno-14-34></a>  <span class=n>space_handling</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>-- turn off this feature to handle it our selfs</span>
<a id=__codelineno-14-35 href=#__codelineno-14-35></a>  <span class=n>patterns</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-14-36 href=#__codelineno-14-36></a>  <span class=c1>---- Place patterns that require spaces at start to optimize matching speed</span>
<a id=__codelineno-14-37 href=#__codelineno-14-37></a>  <span class=c1>---- and apply the %s+ optimization immediately afterwards</span>
<a id=__codelineno-14-38 href=#__codelineno-14-38></a>    <span class=c1>-- bullets</span>
<a id=__codelineno-14-39 href=#__codelineno-14-39></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*%*%s&quot;</span><span class=p>,</span>                 <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;number&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-40 href=#__codelineno-14-40></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*%-%s&quot;</span><span class=p>,</span>                 <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;number&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-41 href=#__codelineno-14-41></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*%+%s&quot;</span><span class=p>,</span>                 <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;number&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-42 href=#__codelineno-14-42></a>    <span class=c1>-- numbered bullet</span>
<a id=__codelineno-14-43 href=#__codelineno-14-43></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*[0-9]+[%.%)]%s&quot;</span><span class=p>,</span>       <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;number&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-44 href=#__codelineno-14-44></a>    <span class=c1>-- blockquote</span>
<a id=__codelineno-14-45 href=#__codelineno-14-45></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*&gt;+%s&quot;</span><span class=p>,</span>                 <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-46 href=#__codelineno-14-46></a>    <span class=c1>-- alternative bold italic formats</span>
<a id=__codelineno-14-47 href=#__codelineno-14-47></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%s___&quot;</span><span class=p>,</span> <span class=s2>&quot;___%f[%s]&quot;</span> <span class=p>},</span>   <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_bold_italic&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-48 href=#__codelineno-14-48></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%s__&quot;</span><span class=p>,</span> <span class=s2>&quot;__%f[%s]&quot;</span> <span class=p>},</span>     <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_bold&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-49 href=#__codelineno-14-49></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%s_[%S]&quot;</span><span class=p>,</span> <span class=s2>&quot;_%f[%s]&quot;</span> <span class=p>},</span>   <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_italic&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-50 href=#__codelineno-14-50></a>    <span class=c1>-- reference links</span>
<a id=__codelineno-14-51 href=#__codelineno-14-51></a>    <span class=p>{</span>
<a id=__codelineno-14-52 href=#__codelineno-14-52></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*%[%^()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]: &quot;</span><span class=p>,</span>
<a id=__codelineno-14-53 href=#__codelineno-14-53></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-54 href=#__codelineno-14-54></a>    <span class=p>},</span>
<a id=__codelineno-14-55 href=#__codelineno-14-55></a>    <span class=p>{</span>
<a id=__codelineno-14-56 href=#__codelineno-14-56></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*%[%^?()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]:%s+.+</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>
<a id=__codelineno-14-57 href=#__codelineno-14-57></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-58 href=#__codelineno-14-58></a>    <span class=p>},</span>
<a id=__codelineno-14-59 href=#__codelineno-14-59></a>    <span class=c1>-- optimization</span>
<a id=__codelineno-14-60 href=#__codelineno-14-60></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%s+&quot;</span><span class=p>,</span>                      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;normal&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-61 href=#__codelineno-14-61></a>
<a id=__codelineno-14-62 href=#__codelineno-14-62></a>  <span class=c1>---- HTML rules imported and adapted from language_html</span>
<a id=__codelineno-14-63 href=#__codelineno-14-63></a>  <span class=c1>---- to not conflict with markdown rules</span>
<a id=__codelineno-14-64 href=#__codelineno-14-64></a>    <span class=c1>-- Inline JS and CSS</span>
<a id=__codelineno-14-65 href=#__codelineno-14-65></a>    <span class=p>{</span>
<a id=__codelineno-14-66 href=#__codelineno-14-66></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-14-67 href=#__codelineno-14-67></a>      <span class=s2>&quot;&lt;%s*[sS][cC][rR][iI][pP][tT]%s+[tT][yY][pP][eE]%s*=%s*&quot;</span> <span class=o>..</span>
<a id=__codelineno-14-68 href=#__codelineno-14-68></a>        <span class=s2>&quot;[&#39;</span><span class=se>\&quot;</span><span class=s2>]%a+/[jJ][aA][vV][aA][sS][cC][rR][iI][pP][tT][&#39;</span><span class=se>\&quot;</span><span class=s2>]%s*&gt;&quot;</span><span class=p>,</span>
<a id=__codelineno-14-69 href=#__codelineno-14-69></a>      <span class=s2>&quot;&lt;%s*/[sS][cC][rR][iI][pP][tT]&gt;&quot;</span>
<a id=__codelineno-14-70 href=#__codelineno-14-70></a>      <span class=p>},</span>
<a id=__codelineno-14-71 href=#__codelineno-14-71></a>      <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.js&quot;</span><span class=p>,</span>
<a id=__codelineno-14-72 href=#__codelineno-14-72></a>      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span>
<a id=__codelineno-14-73 href=#__codelineno-14-73></a>    <span class=p>},</span>
<a id=__codelineno-14-74 href=#__codelineno-14-74></a>    <span class=p>{</span>
<a id=__codelineno-14-75 href=#__codelineno-14-75></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-14-76 href=#__codelineno-14-76></a>      <span class=s2>&quot;&lt;%s*[sS][cC][rR][iI][pP][tT]%s*&gt;&quot;</span><span class=p>,</span>
<a id=__codelineno-14-77 href=#__codelineno-14-77></a>      <span class=s2>&quot;&lt;%s*/%s*[sS][cC][rR][iI][pP][tT]&gt;&quot;</span>
<a id=__codelineno-14-78 href=#__codelineno-14-78></a>      <span class=p>},</span>
<a id=__codelineno-14-79 href=#__codelineno-14-79></a>      <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.js&quot;</span><span class=p>,</span>
<a id=__codelineno-14-80 href=#__codelineno-14-80></a>      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span>
<a id=__codelineno-14-81 href=#__codelineno-14-81></a>    <span class=p>},</span>
<a id=__codelineno-14-82 href=#__codelineno-14-82></a>    <span class=p>{</span>
<a id=__codelineno-14-83 href=#__codelineno-14-83></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-14-84 href=#__codelineno-14-84></a>      <span class=s2>&quot;&lt;%s*[sS][tT][yY][lL][eE][^&gt;]*&gt;&quot;</span><span class=p>,</span>
<a id=__codelineno-14-85 href=#__codelineno-14-85></a>      <span class=s2>&quot;&lt;%s*/%s*[sS][tT][yY][lL][eE]%s*&gt;&quot;</span>
<a id=__codelineno-14-86 href=#__codelineno-14-86></a>      <span class=p>},</span>
<a id=__codelineno-14-87 href=#__codelineno-14-87></a>      <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.css&quot;</span><span class=p>,</span>
<a id=__codelineno-14-88 href=#__codelineno-14-88></a>      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span>
<a id=__codelineno-14-89 href=#__codelineno-14-89></a>    <span class=p>},</span>
<a id=__codelineno-14-90 href=#__codelineno-14-90></a>    <span class=c1>-- Comments</span>
<a id=__codelineno-14-91 href=#__codelineno-14-91></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;&lt;!%-%-&quot;</span><span class=p>,</span> <span class=s2>&quot;%-%-&gt;&quot;</span> <span class=p>},</span>   <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;comment&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-92 href=#__codelineno-14-92></a>    <span class=c1>-- Tags</span>
<a id=__codelineno-14-93 href=#__codelineno-14-93></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%f[^&lt;]![%a_][%w_]*&quot;</span><span class=p>,</span>    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;keyword2&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-94 href=#__codelineno-14-94></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%f[^&lt;][%a_][%w_]*&quot;</span><span class=p>,</span>     <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-95 href=#__codelineno-14-95></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%f[^&lt;]/[%a_][%w_]*&quot;</span><span class=p>,</span>    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-96 href=#__codelineno-14-96></a>    <span class=c1>-- Attributes</span>
<a id=__codelineno-14-97 href=#__codelineno-14-97></a>    <span class=p>{</span>
<a id=__codelineno-14-98 href=#__codelineno-14-98></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[a-z%-]+%s*()=%s*()</span><span class=se>\&quot;</span><span class=s2>.-</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=p>,</span>
<a id=__codelineno-14-99 href=#__codelineno-14-99></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span> <span class=s2>&quot;operator&quot;</span><span class=p>,</span> <span class=s2>&quot;string&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-100 href=#__codelineno-14-100></a>    <span class=p>},</span>
<a id=__codelineno-14-101 href=#__codelineno-14-101></a>    <span class=p>{</span>
<a id=__codelineno-14-102 href=#__codelineno-14-102></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[a-z%-]+%s*()=%s*()&#39;.-&#39;&quot;</span><span class=p>,</span>
<a id=__codelineno-14-103 href=#__codelineno-14-103></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span> <span class=s2>&quot;operator&quot;</span><span class=p>,</span> <span class=s2>&quot;string&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-104 href=#__codelineno-14-104></a>    <span class=p>},</span>
<a id=__codelineno-14-105 href=#__codelineno-14-105></a>    <span class=p>{</span>
<a id=__codelineno-14-106 href=#__codelineno-14-106></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[a-z%-]+%s*()=%s*()%-?%d[%d%.]*&quot;</span><span class=p>,</span>
<a id=__codelineno-14-107 href=#__codelineno-14-107></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span> <span class=s2>&quot;operator&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-108 href=#__codelineno-14-108></a>    <span class=p>},</span>
<a id=__codelineno-14-109 href=#__codelineno-14-109></a>    <span class=c1>-- Entities</span>
<a id=__codelineno-14-110 href=#__codelineno-14-110></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;&amp;#?[a-zA-Z0-9]+;&quot;</span><span class=p>,</span>         <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;keyword2&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-111 href=#__codelineno-14-111></a>
<a id=__codelineno-14-112 href=#__codelineno-14-112></a>  <span class=c1>---- Markdown rules</span>
<a id=__codelineno-14-113 href=#__codelineno-14-113></a>    <span class=c1>-- math</span>
<a id=__codelineno-14-114 href=#__codelineno-14-114></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%$%$&quot;</span><span class=p>,</span> <span class=s2>&quot;%$%$&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span>  <span class=p>},</span>  <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.tex&quot;</span><span class=p>},</span>
<a id=__codelineno-14-115 href=#__codelineno-14-115></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%$&quot;</span><span class=p>,</span> <span class=s2>&quot;%$&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span> <span class=p>},</span>       <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.tex&quot;</span><span class=p>},</span>
<a id=__codelineno-14-116 href=#__codelineno-14-116></a>    <span class=c1>-- code blocks</span>
<a id=__codelineno-14-117 href=#__codelineno-14-117></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;```c++&quot;</span><span class=p>,</span> <span class=s2>&quot;```&quot;</span> <span class=p>},</span>        <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.cpp&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-118 href=#__codelineno-14-118></a>    <span class=c1>-- ... there&#39;s some other patterns here, but I removed them for brevity</span>
<a id=__codelineno-14-119 href=#__codelineno-14-119></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;```lobster&quot;</span><span class=p>,</span> <span class=s2>&quot;```&quot;</span> <span class=p>},</span>    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.lobster&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-120 href=#__codelineno-14-120></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;```&quot;</span><span class=p>,</span> <span class=s2>&quot;```&quot;</span> <span class=p>},</span>           <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-121 href=#__codelineno-14-121></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;``&quot;</span><span class=p>,</span> <span class=s2>&quot;``&quot;</span> <span class=p>},</span>             <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-122 href=#__codelineno-14-122></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%f[</span><span class=se>\\</span><span class=s2>`]%`[%S]&quot;</span><span class=p>,</span> <span class=s2>&quot;`&quot;</span> <span class=p>},</span>   <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-123 href=#__codelineno-14-123></a>    <span class=c1>-- strike</span>
<a id=__codelineno-14-124 href=#__codelineno-14-124></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;~~&quot;</span><span class=p>,</span> <span class=s2>&quot;~~&quot;</span> <span class=p>},</span>             <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;keyword2&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-125 href=#__codelineno-14-125></a>    <span class=c1>-- highlight</span>
<a id=__codelineno-14-126 href=#__codelineno-14-126></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;==&quot;</span><span class=p>,</span> <span class=s2>&quot;==&quot;</span> <span class=p>},</span>             <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;literal&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-127 href=#__codelineno-14-127></a>    <span class=c1>-- lines</span>
<a id=__codelineno-14-128 href=#__codelineno-14-128></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%-%-%-+</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>               <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;comment&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-129 href=#__codelineno-14-129></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%*%*%*+</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>               <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;comment&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-130 href=#__codelineno-14-130></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^___+</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>                  <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;comment&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-131 href=#__codelineno-14-131></a>    <span class=c1>-- bold and italic</span>
<a id=__codelineno-14-132 href=#__codelineno-14-132></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%*%*%*%S&quot;</span><span class=p>,</span> <span class=s2>&quot;%*%*%*&quot;</span> <span class=p>},</span>   <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_bold_italic&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-133 href=#__codelineno-14-133></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%*%*%S&quot;</span><span class=p>,</span> <span class=s2>&quot;%*%*&quot;</span> <span class=p>},</span>       <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_bold&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-134 href=#__codelineno-14-134></a>    <span class=c1>-- handle edge case where asterisk can be at end of line and not close</span>
<a id=__codelineno-14-135 href=#__codelineno-14-135></a>    <span class=p>{</span>
<a id=__codelineno-14-136 href=#__codelineno-14-136></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;%f[</span><span class=se>\\</span><span class=s2>%*]%*[%S]&quot;</span><span class=p>,</span> <span class=s2>&quot;%*%f[^%*]&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-137 href=#__codelineno-14-137></a>      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_italic&quot;</span>
<a id=__codelineno-14-138 href=#__codelineno-14-138></a>    <span class=p>},</span>
<a id=__codelineno-14-139 href=#__codelineno-14-139></a>    <span class=c1>-- alternative bold italic formats</span>
<a id=__codelineno-14-140 href=#__codelineno-14-140></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^___[%s%p%w]+___%s&quot;</span> <span class=p>,</span>      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_bold_italic&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-141 href=#__codelineno-14-141></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^__[%s%p%w]+__%s&quot;</span> <span class=p>,</span>        <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_bold&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-142 href=#__codelineno-14-142></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^_[%s%p%w]+_%s&quot;</span> <span class=p>,</span>          <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;markdown_italic&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-143 href=#__codelineno-14-143></a>    <span class=c1>-- heading with custom id</span>
<a id=__codelineno-14-144 href=#__codelineno-14-144></a>    <span class=p>{</span>
<a id=__codelineno-14-145 href=#__codelineno-14-145></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^#+%s[%w%s%p]+(){()#[%w%-]+()}&quot;</span><span class=p>,</span>
<a id=__codelineno-14-146 href=#__codelineno-14-146></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;keyword&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-147 href=#__codelineno-14-147></a>    <span class=p>},</span>
<a id=__codelineno-14-148 href=#__codelineno-14-148></a>    <span class=c1>-- headings</span>
<a id=__codelineno-14-149 href=#__codelineno-14-149></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^#+%s.+</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span>                <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;keyword&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-150 href=#__codelineno-14-150></a>    <span class=c1>-- superscript and subscript</span>
<a id=__codelineno-14-151 href=#__codelineno-14-151></a>    <span class=p>{</span>
<a id=__codelineno-14-152 href=#__codelineno-14-152></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%^()%d+()%^&quot;</span><span class=p>,</span>
<a id=__codelineno-14-153 href=#__codelineno-14-153></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-154 href=#__codelineno-14-154></a>    <span class=p>},</span>
<a id=__codelineno-14-155 href=#__codelineno-14-155></a>    <span class=p>{</span>
<a id=__codelineno-14-156 href=#__codelineno-14-156></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%~()%d+()%~&quot;</span><span class=p>,</span>
<a id=__codelineno-14-157 href=#__codelineno-14-157></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-158 href=#__codelineno-14-158></a>    <span class=p>},</span>
<a id=__codelineno-14-159 href=#__codelineno-14-159></a>    <span class=c1>-- definitions</span>
<a id=__codelineno-14-160 href=#__codelineno-14-160></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^:%s.+&quot;</span><span class=p>,</span>                   <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-161 href=#__codelineno-14-161></a>    <span class=c1>-- emoji</span>
<a id=__codelineno-14-162 href=#__codelineno-14-162></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;:[a-zA-Z0-9_%-]+:&quot;</span><span class=p>,</span>        <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;literal&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-163 href=#__codelineno-14-163></a>    <span class=c1>-- images and link</span>
<a id=__codelineno-14-164 href=#__codelineno-14-164></a>    <span class=p>{</span>
<a id=__codelineno-14-165 href=#__codelineno-14-165></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;!?%[!?%[()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]%(()[&quot;</span><span class=o>..</span><span class=n>in_parenthesis_match</span><span class=o>..</span><span class=s2>&quot;]+()%)%]%(()[&quot;</span><span class=o>..</span><span class=n>in_parenthesis_match</span><span class=o>..</span><span class=s2>&quot;]+()%)&quot;</span><span class=p>,</span>
<a id=__codelineno-14-166 href=#__codelineno-14-166></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-167 href=#__codelineno-14-167></a>    <span class=p>},</span>
<a id=__codelineno-14-168 href=#__codelineno-14-168></a>    <span class=p>{</span>
<a id=__codelineno-14-169 href=#__codelineno-14-169></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;!?%[!?%[?()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]?%]%(()[&quot;</span><span class=o>..</span><span class=n>in_parenthesis_match</span><span class=o>..</span><span class=s2>&quot;]+()%)&quot;</span><span class=p>,</span>
<a id=__codelineno-14-170 href=#__codelineno-14-170></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-171 href=#__codelineno-14-171></a>    <span class=p>},</span>
<a id=__codelineno-14-172 href=#__codelineno-14-172></a>    <span class=c1>-- reference links</span>
<a id=__codelineno-14-173 href=#__codelineno-14-173></a>    <span class=p>{</span>
<a id=__codelineno-14-174 href=#__codelineno-14-174></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%[()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%] *()%[()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]&quot;</span><span class=p>,</span>
<a id=__codelineno-14-175 href=#__codelineno-14-175></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-176 href=#__codelineno-14-176></a>    <span class=p>},</span>
<a id=__codelineno-14-177 href=#__codelineno-14-177></a>    <span class=p>{</span>
<a id=__codelineno-14-178 href=#__codelineno-14-178></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;!?%[%^?()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]&quot;</span><span class=p>,</span>
<a id=__codelineno-14-179 href=#__codelineno-14-179></a>      <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-14-180 href=#__codelineno-14-180></a>    <span class=p>},</span>
<a id=__codelineno-14-181 href=#__codelineno-14-181></a>    <span class=c1>-- url&#39;s and email</span>
<a id=__codelineno-14-182 href=#__codelineno-14-182></a>    <span class=p>{</span>
<a id=__codelineno-14-183 href=#__codelineno-14-183></a>      <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;&lt;[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+%.[a-zA-Z0-9-.]+&gt;&quot;</span><span class=p>,</span>
<a id=__codelineno-14-184 href=#__codelineno-14-184></a>      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span>
<a id=__codelineno-14-185 href=#__codelineno-14-185></a>    <span class=p>},</span>
<a id=__codelineno-14-186 href=#__codelineno-14-186></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;&lt;https?://%S+&gt;&quot;</span><span class=p>,</span>           <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-187 href=#__codelineno-14-187></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;https?://%S+&quot;</span><span class=p>,</span>             <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;function&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-188 href=#__codelineno-14-188></a>    <span class=c1>-- optimize consecutive dashes used in tables</span>
<a id=__codelineno-14-189 href=#__codelineno-14-189></a>    <span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;%-+&quot;</span><span class=p>,</span>                      <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;normal&quot;</span> <span class=p>},</span>
<a id=__codelineno-14-190 href=#__codelineno-14-190></a>  <span class=p>},</span>
<a id=__codelineno-14-191 href=#__codelineno-14-191></a>  <span class=n>symbols</span> <span class=o>=</span> <span class=p>{</span> <span class=p>},</span>
<a id=__codelineno-14-192 href=#__codelineno-14-192></a><span class=p>}</span>
<a id=__codelineno-14-193 href=#__codelineno-14-193></a>
<a id=__codelineno-14-194 href=#__codelineno-14-194></a><span class=c1>-- Adjust the color on theme changes</span>
<a id=__codelineno-14-195 href=#__codelineno-14-195></a><span class=n>core</span><span class=p>.</span><span class=n>add_thread</span><span class=p>(</span><span class=kr>function</span><span class=p>()</span>
<a id=__codelineno-14-196 href=#__codelineno-14-196></a>  <span class=kr>while</span> <span class=kc>true</span> <span class=kr>do</span>
<a id=__codelineno-14-197 href=#__codelineno-14-197></a>    <span class=kr>if</span> <span class=n>initial_color</span> <span class=o>~=</span> <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;keyword2&quot;</span><span class=p>]</span> <span class=kr>then</span>
<a id=__codelineno-14-198 href=#__codelineno-14-198></a>      <span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>attr</span> <span class=kr>in</span> <span class=nb>pairs</span><span class=p>({</span><span class=s2>&quot;bold&quot;</span><span class=p>,</span> <span class=s2>&quot;italic&quot;</span><span class=p>,</span> <span class=s2>&quot;bold_italic&quot;</span><span class=p>})</span> <span class=kr>do</span>
<a id=__codelineno-14-199 href=#__codelineno-14-199></a>        <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;markdown_&quot;</span><span class=o>..</span><span class=n>attr</span><span class=p>]</span> <span class=o>=</span> <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;keyword2&quot;</span><span class=p>]</span>
<a id=__codelineno-14-200 href=#__codelineno-14-200></a>      <span class=kr>end</span>
<a id=__codelineno-14-201 href=#__codelineno-14-201></a>      <span class=n>initial_color</span> <span class=o>=</span> <span class=n>style</span><span class=p>.</span><span class=n>syntax</span><span class=p>[</span><span class=s2>&quot;keyword2&quot;</span><span class=p>]</span>
<a id=__codelineno-14-202 href=#__codelineno-14-202></a>    <span class=kr>end</span>
<a id=__codelineno-14-203 href=#__codelineno-14-203></a>    <span class=nb>coroutine.yield</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-14-204 href=#__codelineno-14-204></a>  <span class=kr>end</span>
<a id=__codelineno-14-205 href=#__codelineno-14-205></a><span class=kr>end</span><span class=p>)</span>
</code></pre></div><p>It demonstrates a lot of syntax highlighting features that were added to v2.1.0 and some workarounds needed.<h3 id=syntax-fonts-since-11610>Syntax fonts (Since 1.16.10)</h3><p>The syntax allows users to set different font styles (bold, italic, etc.) for different patterns.
To change the font style of a token, add a Font to <code>style.syntax_fonts[token_type]</code>.<p>For example:<div class=highlight><pre><span></span><code><a id=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1>-- will ensure every &quot;fancysyntax_fancy_token&quot; is italic</span>
<a id=__codelineno-15-2 href=#__codelineno-15-2></a><span class=n>style</span><span class=p>.</span><span class=n>syntax_fonts</span><span class=p>[</span><span class=s2>&quot;fancysyntax_fancy_token&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>renderer</span><span class=p>.</span><span class=n>font</span><span class=p>.</span><span class=nb>load</span><span class=p>(</span><span class=s2>&quot;myfont.ttf&quot;</span><span class=p>,</span> <span class=mi>14</span> <span class=o>*</span> <span class=n>SCALE</span><span class=p>,</span> <span class=p>{</span> <span class=n>italic</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>})</span>
</code></pre></div><p>The markdown example automates this with a for loop.<p>The limitations here are that fonts cannot be copied with different attributes, thus the font path
has to be hard-coded.
Other than that, abusing <code>style.syntax_fonts</code> may lead to <strong>slow performance</strong> and <strong>high memory consumption</strong>.
This is very obvious when the user tries to resize the editor with <code>ctrl-scroll</code> or <code>ctrl+</code> and <code>ctrl-</code>.
Please use it in moderation.<h3 id=space-handling-since-v210>Space handling (since v2.1.0)</h3><p>By default, Lite XL prepends a pattern <code>{ pattern = "%s+", type = "normal" }</code> to the syntax.
This improves the performance drastically on lines that starts with whitespace (e.g. heavily indented lines).
It works by matching the whitespace before other patterns in order to prevent Lite XL from iterating
the entire syntax.
However, there may be syntaxes that require matching spaces (e.g. Markdown with indented blocks)
so this can be disabled by setting <code>space_handling</code> to <code>false.</code><div class="admonition tip"><p class=admonition-title>Tip<p>To keep the space handling optimization or to support older versions of Lite XL,
<code>{ pattern = "%s+", type = "normal" }</code> can be added after patterns that require space.</div><h3 id=simple-patterns-with-multiple-tokens-v11610>Simple patterns with multiple tokens (v1.16.10)</h3><p>This is an excerpt taken from the Markdown plugin:<div class=highlight><pre><span></span><code><a id=__codelineno-16-1 href=#__codelineno-16-1></a><span class=kd>local</span> <span class=n>in_squares_match</span> <span class=o>=</span> <span class=s2>&quot;^%[%]&quot;</span>
<a id=__codelineno-16-2 href=#__codelineno-16-2></a><span class=c1>-- reference links</span>
<a id=__codelineno-16-3 href=#__codelineno-16-3></a><span class=p>{</span>
<a id=__codelineno-16-4 href=#__codelineno-16-4></a>  <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;^%s*%[%^()[&quot;</span><span class=o>..</span><span class=n>in_squares_match</span><span class=o>..</span><span class=s2>&quot;]+()%]: &quot;</span><span class=p>,</span>
<a id=__codelineno-16-5 href=#__codelineno-16-5></a>  <span class=nb>type</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;number&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span> <span class=p>}</span>
<a id=__codelineno-16-6 href=#__codelineno-16-6></a><span class=p>},</span>
</code></pre></div><p>Sometimes it makes sense to highlight different parts of a pattern differently.
An empty parenthesis (<code>()</code>) in Lua patterns will return the position of the text in the parentheses.
This will tell Lite XL when to change the type of token.
For instance, <code>^%s*%[%^</code> is <code>"function"</code>,
<code>["..in_squares_match.."]+</code> is <code>"number"</code>
and <code>%]:</code> is <code>"function"</code>.<h3 id=subsyntaxes-since-v11610>Subsyntaxes (Since v1.16.10)</h3><p>Lite XL supports embedding another syntax into the existing syntax.
This is used to support code blocks inside the Markdown syntax.<p>For example:<div class=highlight><pre><span></span><code><a id=__codelineno-17-1 href=#__codelineno-17-1></a><span class=p>{</span> <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;```cpp&quot;</span><span class=p>,</span> <span class=s2>&quot;```&quot;</span> <span class=p>},</span>        <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=n>syntax</span> <span class=o>=</span> <span class=s2>&quot;.cpp&quot;</span> <span class=p>},</span>
</code></pre></div><p>This would highlight <code>```cpp</code> and <code>```</code> with <code>"string"</code> while everything inside them
will be highlighted with a syntax that matches <code>".cpp"</code>.<aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg viewBox="0 0 24 24"><path d="M21 13.1c-.1.0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6.0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3.0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4.0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
</span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 18, 2024</span></span></aside></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden>
<svg viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
Back to top</button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../introduction/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction"><div class="md-footer__button md-icon"><svg viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div><div class=md-footer__title><span class=md-footer__direction>Previous</span><div class=md-ellipsis>Introduction</div></div></a><a href=../creating-themes/ class="md-footer__link md-footer__link--next" aria-label="Next: Creating Themes"><div class=md-footer__title><span class=md-footer__direction>Next</span><div class=md-ellipsis>Creating Themes</div></div><div class="md-footer__button md-icon"><svg viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright>Made with
<a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener>Material for MkDocs</a></div><div class=md-social><a href=https://github.com/lite-xl/lite-xl target=_blank rel=noopener title=github.com class=md-social__link><svg viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6.0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
</a><a href=https://discord.gg/RWzqC3nx7K target=_blank rel=noopener title=discord.gg class=md-social__link><svg viewBox="0 0 640 512"><path d="M524.531 69.836a1.5 1.5.0 00-.764-.7A485 485 0 00404.081 32.03a1.82 1.82.0 00-1.923.91 338 338 0 00-14.9 30.6 447.9 447.9.0 00-134.426.0 310 310 0 00-15.135-30.6 1.89 1.89.0 00-1.924-.91A483.7 483.7.0 00116.085 69.137a1.7 1.7.0 00-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02.0 00.765 1.375 487.7 487.7.0 00146.825 74.189 1.9 1.9.0 002.063-.676A348 348 0 00208.12 430.4a1.86 1.86.0 00-1.019-2.588 321 321 0 01-45.868-21.853 1.885 1.885.0 01-.185-3.126 251 251 0 009.109-7.137 1.82 1.82.0 011.9-.256c96.229 43.917 200.41 43.917 295.5.0a1.81 1.81.0 011.924.233 235 235 0 009.132 7.16 1.884 1.884.0 01-.162 3.126 301.4 301.4.0 01-45.89 21.83 1.875 1.875.0 00-1 2.611 391 391 0 0030.014 48.815 1.86 1.86.0 002.063.7A486 486 0 00610.7 405.729a1.88 1.88.0 00.765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972.0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665.0 53.306 26.82 52.843 59.239.0 32.654-23.41 59.241-52.843 59.241m195.38.0c-28.971.0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667.0 53.307 26.82 52.844 59.239.0 32.654-23.177 59.241-52.844 59.241"/></svg>
</a><a href=https://matrix.to/#/#lite-xl:matrix.org target=_blank rel=noopener title=matrix.to class=md-social__link><svg viewBox="0 0 24 24"><path d="M.632.55v22.9H2.28V24H0V0h2.28v.55zm7.043 7.26v1.157h.033a3.3 3.3.0 011.117-1.024c.433-.245.936-.365 1.5-.365q.81.002 1.481.314c.448.208.785.582 1.02 1.108q.382-.562 1.034-.992.651-.43 1.546-.43.679.0 1.26.167c.388.11.716.286.993.53.276.245.489.559.646.951q.229.587.23 1.417v5.728h-2.349V11.52q0-.43-.032-.812a1.8 1.8.0 00-.18-.66 1.1 1.1.0 00-.438-.448q-.292-.165-.785-.166-.498.0-.803.189a1.4 1.4.0 00-.48.499 2 2 0 00-.231.696 5.6 5.6.0 00-.06.785v4.768h-2.35v-4.8q.002-.38-.018-.752a2.1 2.1.0 00-.143-.688 1.05 1.05.0 00-.415-.503c-.194-.125-.476-.19-.854-.19q-.168.0-.439.074c-.18.051-.36.143-.53.282a1.64 1.64.0 00-.439.595q-.18.39-.18 1.02v4.966H5.46V7.81zm15.693 15.64V.55H21.72V0H24v24h-2.28v-.55z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"base":"../..","features":["navigation.footer","navigation.instant","navigation.tracking","navigation.top","navigation.tabs","content.code.copy","content.action.view","content.action.edit","header.autohide"],"search":"../../assets/javascripts/workers/search.6ce7567c.min.js","translations":{"clipboard.copied":"Copied to clipboard","clipboard.copy":"Copy to clipboard","search.result.more.one":"1 more on this page","search.result.more.other":"# more on this page","search.result.none":"No matching documents","search.result.one":"1 matching document","search.result.other":"# matching documents","search.result.placeholder":"Type to start searching","search.result.term.missing":"Missing","select.version":"Select version"},"version":{"provider":"mike"}}</script><script src=../../assets/javascripts/bundle.83f73b43.min.js></script><script src=../../javascripts/wade.min.938547.min.js></script><script src=../../javascripts/search.d34b6a.min.js></script><script id=init-glightbox>const lightbox=GLightbox({touchNavigation:!0,loop:!1,zoomable:!0,draggable:!0,openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide"});document$.subscribe(()=>{lightbox.reload()})</script>